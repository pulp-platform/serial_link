# Copyright 2022 ETH Zurich and University of Bologna.
# Solderpad Hardware License, Version 0.51, see LICENSE for details.
# SPDX-License-Identifier: SHL-0.51

package:
  name: serial_link
  authors:
    - "Tim Fischer <fischeti@iis.ee.ethz.ch>"
    - "Manuel Eggimann <meggimann@iis.ee.ethz.ch>"
    - "Thomas Benz <tbenz@iis.ee.ethz.ch>"
    - "Paul Scheffler <paulsc@iis.ee.ethz.ch>"
    - "Yannick Baumann <baumanny@student.ethz.ch>"

dependencies:
  common_cells:        { git: "https://github.com/pulp-platform/common_cells.git",       version: 1.28.0        }
  axi:                 { git: "https://github.com/pulp-platform/axi.git",                version: 0.39.0-beta.9 }
  register_interface:  { git: "https://github.com/pulp-platform/register_interface.git", version: 0.3.8         }
  floo_noc:            { git: "https://github.com/pulp-platform/FlooNoC.git",            version: 0.1.0         }

export_include_dirs:
  - src/axis/include

sources:
  files:

    # Configuration Registers
    - src/regs/serial_link_reg_pkg.sv
    - src/regs/serial_link_reg_top.sv
    - src/regs/serial_link_single_channel_reg_pkg.sv
    - src/regs/serial_link_single_channel_reg_top.sv

    # Parametrization
    - src/serial_link_pkg.sv
    - src/noc_bridge_pkg.sv
    - src/noc_bridge_narrow_wide_pkg.sv

    # Abstraction Layers
    - src/channel_allocator/stream_chopper.sv
    - src/channel_allocator/stream_dechopper.sv
    - src/channel_allocator/channel_despread_sfr.sv
    - src/channel_allocator/channel_spread_sfr.sv
    - src/channel_allocator/serial_link_channel_allocator.sv
    - src/serial_link_credit_synchronization.sv
    - src/serial_link_axi_network.sv
    # I use the noc_bridge module instead. The below module can likely be deleted.
    # - src/serial_link_floo_network.sv
    - src/serial_link_data_link.sv
    - src/serial_link_physical.sv

    # NoC-bridge versions
    - src/floo_axis_noc_bridge.sv
    - src/floo_axis_noc_bridge_narrow_wide.sv
    - src/floo_axis_noc_bridge_virtual_channels.sv
    - src/floo_axis_noc_bridge_virtual_channels_narrow_wide.sv

    # Benchmarking unit & latency module
    - src/serial_link_benchmarking_unit.sv
    - src/insert_latency_to_signal.sv

    # Serial Link Wrapper
    - src/axi_serial_link.sv
    - src/floo_serial_link.sv
    - src/floo_serial_link_narrow_wide_synth_wrapper.sv
    - src/floo_serial_link_narrow_wide.sv

    # Wrapper for Occamy
    - src/axi_serial_link_occamy_wrapper.sv

    - target: synthesis
      files:
      - src/serial_link_synth_wrapper.sv

    - target: simulation
      files:
      - test/tb_axi_serial_link.sv
      - test/tb_floo_serial_link.sv
      - test/tb_floo_serial_link_narrow_wide.sv
      - test/tb_floo_noc_bridge.sv
      - test/tb_floo_noc_bridge_narrow_wide.sv
      - test/tb_ch_calib_serial_link.sv
      - test/tb_stream_chopper.sv
      - test/tb_stream_chopper_dechopper.sv
      - test/tb_channel_allocator.sv
