# Copyright 2022 ETH Zurich and University of Bologna.
# Solderpad Hardware License, Version 0.51, see LICENSE for details.
# SPDX-License-Identifier: SHL-0.51

package:
  name: serial_link
  authors:
    - "Tim Fischer <fischeti@iis.ee.ethz.ch>"
    - "Manuel Eggimann <meggimann@iis.ee.ethz.ch>"
    - "Thomas Benz <tbenz@iis.ee.ethz.ch>"
    - "Paul Scheffler <paulsc@iis.ee.ethz.ch>"
    - "Yannick Baumann <baumanny@student.ethz.ch>"

dependencies:
  common_cells:        { git: "https://github.com/pulp-platform/common_cells.git",       version: 1.32.0 }
  axi:                 { git: "https://github.com/pulp-platform/axi.git",                version: 0.39.1 }
  register_interface:  { git: "https://github.com/pulp-platform/register_interface.git", version: 0.4.2  }
  floo_noc:            { git: "https://github.com/pulp-platform/FlooNoC.git",            rev: "bender/include-dir"  }

export_include_dirs:
  - src/axis/include

sources:
  files:

    # Configuration Registers
    - src/regs/serial_link_reg_pkg.sv
    - src/regs/serial_link_reg_top.sv
    - src/regs/serial_link_single_channel_reg_pkg.sv
    - src/regs/serial_link_single_channel_reg_top.sv

    # Parametrization
    - src/serial_link_pkg.sv
    - src/noc_bridge_pkg.sv
    - src/noc_bridge_narrow_wide_pkg.sv

    # Channel Allocator
    - src/channel_allocator/stream_chopper.sv
    - src/channel_allocator/stream_dechopper.sv
    - src/channel_allocator/channel_despread_sfr.sv
    - src/channel_allocator/channel_spread_sfr.sv
    - src/channel_allocator/serial_link_channel_allocator.sv

    # Functional blocks
    - src/serial_link_credit_synchronization.sv
    - src/dequeue_shift_register.sv
    - src/enqueue_register.sv

    # Abstraction Layers
    - src/serial_link_axi_network.sv
    - src/serial_link_floo_network.sv
    - src/serial_link_floo_nw_network.sv
    - src/serial_link_floo_vc_network.sv
    - src/serial_link_floo_nw_vc_network.sv
    - src/serial_link_data_link.sv
    - src/serial_link_physical.sv

    # Serial Link Wrappers
    - src/axi_serial_link.sv
    - src/floo_serial_link.sv
    - src/floo_serial_link_narrow_wide.sv

    # Wrapper for Occamy
    - src/axi_serial_link_occamy_wrapper.sv

    - target: synthesis
      files:
      - src/serial_link_synth_wrapper.sv
      - src/floo_serial_link_narrow_wide_synth_wrapper.sv


    - target: simulation
      files:
      # Benchmarking unit & latency module
      - test/serial_link_benchmarking_unit.sv
      - test/delay_module.sv
      - test/tb_axi_serial_link.sv
      - test/tb_floo_serial_link.sv
      - test/tb_floo_serial_link_narrow_wide.sv
      - test/tb_floo_noc_bridge.sv
      - test/tb_ch_calib_serial_link.sv
      - test/tb_stream_chopper.sv
      - test/tb_stream_chopper_dechopper.sv
      - test/tb_channel_allocator.sv
